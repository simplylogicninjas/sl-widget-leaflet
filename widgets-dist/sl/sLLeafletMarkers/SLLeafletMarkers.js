define(["exports","react"],(function(e,t){"use strict";function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n,a=o(t);!function(e){e[e.SetMapReady=0]="SetMapReady",e[e.SetMapName=1]="SetMapName",e[e.SetMarkers=2]="SetMarkers",e[e.SetGeoJSON=3]="SetGeoJSON",e[e.SetGeoJSONAction=4]="SetGeoJSONAction",e[e.SetGeofence=5]="SetGeofence",e[e.SetGeofenceAction=6]="SetGeofenceAction",e[e.SetGeofenceOutAction=7]="SetGeofenceOutAction",e[e.SetGeofencePositionAction=8]="SetGeofencePositionAction",e[e.SetGeofenceOptions=9]="SetGeofenceOptions",e[e.SetMarkerAction=10]="SetMarkerAction",e[e.SetMarkerDragAction=11]="SetMarkerDragAction"}(n||(n={}));e.SLLeafletMarkers=function(e){const{state:o,dispatch:r}=t.useContext(mx.slmap.context),i=t.useRef([]),c=t=>{const o=t.map((t=>{var o,n;if(e.id.get(t).value&&e.latitude.get(t).value&&e.longitude.get(t).value){const a=null===(o=e.content)||void 0===o?void 0:o.get(t),r=null===(n=e.popupContent)||void 0===n?void 0:n.get(t),i=e.id.get(t).value.toString(),c=e.latitude.get(t).value,u=e.longitude.get(t).value;return{content:a,popupContent:r,id:i,draggable:!!e.draggable.get(t).value,position:[parseFloat(c),parseFloat(u)]}}})).filter((e=>!!e));var a,c,u;c=o,u=i.current,JSON.stringify(c)!==JSON.stringify(u)&&(i.current=o,r((a=[...o],{type:n.SetMarkers,payload:[...a]})))},u=t=>{e.onMarkerClickAction&&e.onMarkerID&&(e.onMarkerID.setValue(t),e.onMarkerClickAction.execute())},M=(t,o,n)=>{e.onMarkerDragAction&&e.onMarkerMoveID&&e.onMarkerMoveLatitude&&e.onMarkerMoveLongitude&&(e.onMarkerMoveID.setValue(n),e.onMarkerMoveLatitude.setValue(t),e.onMarkerMoveLongitude.setValue(o),e.onMarkerDragAction.execute())};return t.useEffect((()=>{o.mapReady&&e.data.items&&c(e.data.items)}),[e.data.items,o.mapReady]),t.useEffect((()=>{var t;e.onMarkerClickAction&&e.onMarkerID&&r((t=u,{type:n.SetMarkerAction,payload:t})),e.onMarkerDragAction&&e.onMarkerMoveID&&e.onMarkerMoveLatitude&&e.onMarkerMoveLongitude&&r(function(e){return{type:n.SetMarkerDragAction,payload:e}}(M))}),[e.onMarkerClickAction,e.onMarkerID,e.onMarkerDragAction,e.onMarkerMoveID,e.onMarkerMoveLatitude,e.onMarkerMoveLongitude]),t.createElement(a.default.Fragment,null)},Object.defineProperty(e,"__esModule",{value:!0})}));

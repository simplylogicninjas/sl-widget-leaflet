import e,{useContext as t,useRef as o,useEffect as n,createElement as a}from"react";var r;!function(e){e[e.SetMapReady=0]="SetMapReady",e[e.SetMapName=1]="SetMapName",e[e.SetMarkers=2]="SetMarkers",e[e.SetGeoJSON=3]="SetGeoJSON",e[e.SetGeoJSONAction=4]="SetGeoJSONAction",e[e.SetGeofence=5]="SetGeofence",e[e.SetGeofenceAction=6]="SetGeofenceAction",e[e.SetGeofenceOutAction=7]="SetGeofenceOutAction",e[e.SetGeofencePositionAction=8]="SetGeofencePositionAction",e[e.SetGeofenceOptions=9]="SetGeofenceOptions",e[e.SetMarkerAction=10]="SetMarkerAction",e[e.SetMarkerDragAction=11]="SetMarkerDragAction"}(r||(r={}));function c(c){const{state:i,dispatch:S}=t(mx.slmap.context),u=o([]),s=e=>{u.current=[...e];const t=e.map((e=>{const t=c.geoJSON.get(e);return t.value?JSON.parse(t.value):null})).filter((e=>!!e));S(function(e){return{type:r.SetGeoJSON,payload:[...e]}}(t))},f=e=>{c.onFeatureClickAction&&c.onFeatureId&&(c.onFeatureId.setValue(e),c.onFeatureClickAction.execute())};return n((()=>{var e,t;i.mapReady&&c.data.items&&(e=u.current,t=c.data.items,JSON.stringify(e)!==JSON.stringify(t))&&s(c.data.items)}),[c.data.items]),n((()=>{var e;c.onFeatureClickAction&&c.onFeatureId&&S((e=f,{type:r.SetGeoJSONAction,payload:e}))}),[c.onFeatureClickAction,c.onFeatureId]),a(e.Fragment,null)}export{c as SLLeafletGeoJSON};
